<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyOrbit Pro Camera</title>
    <style>
        body { background-color: black; color: white; text-align: center; font-family: Arial, sans-serif; }
        .camera-container { position: relative; display: inline-block; width: 90%; max-width: 500px; margin-top: 10px; }
        video { width: 100%; border-radius: 15px; border: 2px solid #333; }
        .controls { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 20px; }
        button { padding: 12px; border-radius: 8px; border: none; font-weight: bold; cursor: pointer; }
        #timer-display { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 60px; color: white; }
    </style>
</head>
<body>

    <h2>MyOrbit Camera</h2>

    <div class="camera-container">
        <video id="video-feed" autoplay playsinline></video>
        <div id="timer-display"></div>
    </div>

    <div class="controls">
        <button id="btn-start" style="background: #e74c3c; color: white;">START</button>
        <button id="btn-flip" style="background: #3498db; color: white;">FLIP</button>
        <button id="btn-torch" style="background: #f1c40f;">TORCH</button>
        <button id="btn-timer" style="background: #e67e22; color: white;">TIMER</button>
        
        <select id="filter-select" style="padding: 10px; border-radius: 8px;">
            <option value="none">Normal</option>
            <option value="grayscale(100%)">B&W</option>
            <option value="sepia(100%)">Vintage</option>
        </select>
        
        <button id="btn-burst" style="background: #2ecc71; color: white;">BURST</button>
    </div>

    <script>
        // Yahan se JavaScript shuru hoti hai
        const video = document.getElementById('video-feed');
        const btnStart = document.getElementById('btn-start');
        const btnFlip = document.getElementById('btn-flip');
        const filterSelect = document.getElementById('filter-select');
        const timerDisplay = document.getElementById('timer-display');

        let stream = null;
        let currentFacingMode = "user";

        async function startCamera(mode) {
            if (stream) stream.getTracks().forEach(track => track.stop());
            try {
                stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: mode } });
                video.srcObject = stream;
            } catch (err) { alert("Camera Error: " + err); }
        }

        btnStart.addEventListener('click', () => startCamera(currentFacingMode));

        btnFlip.addEventListener('click', () => {
            currentFacingMode = (currentFacingMode === "user") ? "environment" : "user";
            startCamera(currentFacingMode);
        });

        filterSelect.addEventListener('change', () => {
            video.style.filter = filterSelect.value;
        });

        // Photo khinchne ka function
        function takeSnap() {
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth;
            canvas.height = video.videoHeight;
            const ctx = canvas.getContext('2d');
            ctx.filter = getComputedStyle(video).filter;
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            const link = document.createElement('a');
            link.href = canvas.toDataURL('image/png');
            link.download = `MyOrbit_${Date.now()}.png`;
            link.click();
        }

        // Timer Function
        document.getElementById('btn-timer').addEventListener('click', () => {
            let count = 3;
            timerDisplay.innerText = count;
            const interval = setInterval(() => {
                count--;
                if (count > 0) timerDisplay.innerText = count;
                else {
                    clearInterval(interval);
                    timerDisplay.innerText = "";
                    takeSnap();
                }
            }, 1000);
        });
    </script>
</body>
</html>
